df <- info$results
View(df)
df <- info[["results"]][["bills"]][[1]]
View(df)
View(df)
library(dplyr)
get_bills_on_topic <- function(topic){
resource <- paste0(base_uri, endpoint)
query_params <- list(query = topic)
response <- GET(resource, query = query_params,
add_headers('X-API-Key' = propublica_key))
body <- content(response, "text")
info <- fromJSON(body)
df <- info$info[["results"]][["bills"]][[1]] %>%
select(bill_id, title, sponsor_title, sponsor_name, sponsor_state,
sponsor_party, active, latest_major_action_date,
latest_major_action, bill_uri)
}
get_bills_on_topic("climate")
get_bills_on_topic <- function(topic){
resource <- paste0(base_uri, endpoint)
query_params <- list(query = topic)
response <- GET(resource, query = query_params,
add_headers('X-API-Key' = propublica_key))
body <- content(response, "text")
info <- fromJSON(body)
df <- info$info[["results"]][["bills"]][[1]]
df2 <- select(df, bill_id, title, sponsor_title, sponsor_name, sponsor_state,
sponsor_party, active, latest_major_action_date,
latest_major_action, bill_uri)
}
get_bills_on_topic("climate")
library(dplyr)
df2 <- select(df, bill_id, title, sponsor_title, sponsor_name, sponsor_state,
sponsor_party, active, latest_major_action_date,
latest_major_action, bill_uri)
View(df2)
get_bills_on_topic <- function(topic){
resource <- paste0(base_uri, endpoint)
query_params <- list(query = topic)
response <- GET(resource, query = query_params,
add_headers('X-API-Key' = propublica_key))
body <- content(response, "text")
info <- fromJSON(body)
df <- info$info[["results"]][["bills"]][[1]]
df2 <- select(df, bill_id, title, sponsor_title, sponsor_name, sponsor_state,
sponsor_party, active, latest_major_action_date,
latest_major_action, bill_uri)
View(df2)
}
get_bills_on_topic("climate")
is.data.frame(df)
is.data.frame(df2)
df2 <- select(df, bill_id, title, sponsor_title, sponsor_name, sponsor_state,
sponsor_party, active, latest_major_action_date,
latest_major_action, bill_uri)
is.data.frame(df2)
View(df2)
get_bills_on_topic <- function(legislation_topic){
resource <- paste0(base_uri, endpoint)
query_params <- list(query = legislation_topic)
response <- GET(resource, query = query_params,
add_headers('X-API-Key' = propublica_key))
body <- content(response, "text")
info <- fromJSON(body)
df <- info$info[["results"]][["bills"]][[1]]
df2 <- select(df, bill_id, title, sponsor_title, sponsor_name, sponsor_state,
sponsor_party, active, latest_major_action_date,
latest_major_action, bill_uri)
}
get_bills_on_topic("climate")
get_bills_on_topic("climate")
function (.data, ..., .dots = list())
{
UseMethod("select_")
}
df2 <- select(df, bill_id, title, sponsor_title, sponsor_name, sponsor_state,
sponsor_party, active, latest_major_action_date,
latest_major_action, bill_uri)
is.data.frame(df2)
get_bills_on_topic <- function(legislation_topic){
resource <- paste0(base_uri, endpoint)
query_params <- list(query = legislation_topic)
response <- GET(resource, query = query_params,
add_headers('X-API-Key' = propublica_key))
body <- content(response, "text")
info <- fromJSON(body)
df <- info$info[["results"]][["bills"]][[1]]
df2 <- select(df, bill_id, title, sponsor_title, sponsor_name, sponsor_state,
sponsor_party, active, latest_major_action_date,
latest_major_action, bill_uri)
print(head(df2, n = 10))
}
get_bills_on_topic("climate")
df2 <- select(df, bill_id, title, sponsor_title, sponsor_name, sponsor_state,
sponsor_party, active, latest_major_action_date,
latest_major_action, bill_uri)
head(df2, n = 10)
View(head(df2, n = 10))
get_bills_on_topic <- function(legislation_topic){
resource <- paste0(base_uri, endpoint)
query_params <- list(query = legislation_topic)
response <- GET(resource, query = query_params,
add_headers('X-API-Key' = propublica_key))
body <- content(response, "text")
info <- fromJSON(body)
df <- info$info[["results"]][["bills"]][[1]]
df2 <- select(df, bill_id, title, sponsor_title, sponsor_name, sponsor_state,
sponsor_party, active, latest_major_action_date,
latest_major_action, bill_uri)
head(df2, n = 10)
}
get_bills_on_topic("climate")
get_bills_on_topic <- function(legislation_topic){
resource <- paste0(base_uri, endpoint)
query_params <- list(query = legislation_topic)
response <- GET(resource, query = query_params,
add_headers('X-API-Key' = propublica_key))
body <- content(response, "text")
info <- fromJSON(body)
df <- info$info[["results"]][["bills"]][[1]]
df2 <- select(bill_id, title, sponsor_title, sponsor_name, sponsor_state,
sponsor_party, active, latest_major_action_date,
latest_major_action, bill_uri)
head(df2, n = 10)
}
get_bills_on_topic("climate")
resource <- paste0(base_uri, endpoint)
get_bills_on_topic <- function(legislation_topic){
resource <- paste0(base_uri, endpoint)
query_params <- list(query = legislation_topic)
response <- GET(resource, query = query_params,
add_headers('X-API-Key' = propublica_key))
body <- content(response, "text")
info <- fromJSON(body)
df <- info$info[["results"]][["bills"]][[1]] %>%
df2 <- select(bill_id, title, sponsor_title, sponsor_name, sponsor_state,
sponsor_party, active, latest_major_action_date,
latest_major_action, bill_uri)
head(df2, n = 10)
}
get_bills_on_topic("climate")
df <- info$info[["results"]][["bills"]][[1]] %>%
df2 <- select(bill_id, title, sponsor_title, sponsor_name, sponsor_state,
sponsor_party, active, latest_major_action_date,
latest_major_action, bill_uri)
df <- info$info[["results"]][["bills"]][[1]] %>%
df2 <- select(bill_id, title, sponsor_title, sponsor_name, sponsor_state,
sponsor_party, active, latest_major_action_date,
latest_major_action, bill_uri)
head(df2, n = 10)
df <- info$info[["results"]][["bills"]][[1]] %>%
df2 <- select(bill_id, title, sponsor_title, sponsor_name, sponsor_state,
sponsor_party, active, latest_major_action_date,
latest_major_action, bill_uri)
get_bills_on_topic <- function(legislation_topic){
resource <- paste0(base_uri, endpoint)
query_params <- list(query = legislation_topic)
response <- GET(resource, query = query_params,
add_headers('X-API-Key' = propublica_key))
body <- content(response, "text")
info <- fromJSON(body)
df <- info$info[["results"]][["bills"]][[1]] %>%
df2 <- select(bill_id, title, sponsor_title, sponsor_name, sponsor_state,
sponsor_party, active, latest_major_action_date,
latest_major_action, bill_uri)
head(df2, n = 10)
}
get_bills_on_topic("climate")
get_bills_on_topic("climate")
get_bills_on_topic <- function(legislation_topic){
resource <- paste0(base_uri, endpoint)
query_params <- list(query = legislation_topic)
response <- GET(resource, query = query_params,
add_headers('X-API-Key' = propublica_key))
body <- content(response, "text")
info <- fromJSON(body)
df <- info$info[["results"]][["bills"]][[1]] %>%
select(bill_id, title, sponsor_title, sponsor_name, sponsor_state,
sponsor_party, active, latest_major_action_date,
latest_major_action, bill_uri)
head(df2, n = 10)
}
get_bills_on_topic("climate")
df <- info$info[["results"]][["bills"]][[1]] %>%
df2 <- select(bill_id, title, sponsor_title, sponsor_name, sponsor_state,
sponsor_party, active, latest_major_action_date,
latest_major_action, bill_uri)
get_bills_on_topic <- function(legislation_topic){
resource <- paste0(base_uri, endpoint)
query_params <- list(query = legislation_topic)
response <- GET(resource, query = query_params,
add_headers('X-API-Key' = propublica_key))
body <- content(response, "text")
info <- fromJSON(body)
df <- info$info[["results"]][["bills"]][[1]] %>%
df2 <- select(bill_id, title, sponsor_title, sponsor_name, sponsor_state,
sponsor_party, active, latest_major_action_date,
latest_major_action, bill_uri)
head(df2, n = 10)
}
get_bills_on_topic("climate")
get_bills_on_topic <- function(legislation_topic){
resource <- paste0(base_uri, endpoint)
query_params <- list(query = legislation_topic)
response <- GET(resource, query = query_params,
add_headers('X-API-Key' = propublica_key))
body <- content(response, "text")
info <- fromJSON(body)
df <- info$info[["results"]][["bills"]][[1]]
df2 <- select(bill_id, title, sponsor_title, sponsor_name, sponsor_state,
sponsor_party, active, latest_major_action_date,
latest_major_action, bill_uri)
head(df2, n = 10)
}
get_bills_on_topic("climate")
get_bills_on_topic <- function(legislation_topic){
resource <- paste0(base_uri, endpoint)
query_params <- list(query = legislation_topic)
response <- GET(resource, query = query_params,
add_headers('X-API-Key' = propublica_key))
body <- content(response, "text")
info <- fromJSON(body)
df <- info$info[["results"]][["bills"]][[1]]
df2 <- select(bill_id, title, sponsor_title, sponsor_name, sponsor_state,
sponsor_party, active, latest_major_action_date,
latest_major_action, bill_uri)
head(df2, n = 10)
}
get_bills_on_topic("climate")
get_bills_on_topic <- function(legislation_topic){
resource <- paste0(base_uri, endpoint)
query_params <- list(query = legislation_topic)
response <- GET(resource, query = query_params,
add_headers('X-API-Key' = propublica_key))
body <- content(response, "text")
info <- fromJSON(body)
df <- info$info[["results"]][["bills"]][[1]]
df2 <- select(df, bill_id, title, sponsor_title, sponsor_name, sponsor_state,
sponsor_party, active, latest_major_action_date,
latest_major_action, bill_uri)
head(df2, n = 10)
}
get_bills_on_topic("climate")
get_bills_on_topic <- function(legislation_topic){
resource <- paste0(base_uri, endpoint)
query_params <- list(query = legislation_topic)
response <- GET(resource, query = query_params,
add_headers('X-API-Key' = propublica_key))
body <- content(response, "text")
info <- fromJSON(body)
info$info[["results"]][["bills"]][[1]] %>%
df2 <- select(bill_id, title, sponsor_title, sponsor_name, sponsor_state,
sponsor_party, active, latest_major_action_date,
latest_major_action, bill_uri)
head(df2, n = 10)
}
get_bills_on_topic("climate")
get_bills_on_topic <- function(legislation_topic){
resource <- paste0(base_uri, endpoint)
query_params <- list(query = legislation_topic)
response <- GET(resource, query = query_params,
add_headers('X-API-Key' = propublica_key))
body <- content(response, "text")
info <- fromJSON(body)
df <- info$info[["results"]][["bills"]][[1]] %>%
select(bill_id, title, sponsor_title, sponsor_name, sponsor_state,
sponsor_party, active, latest_major_action_date,
latest_major_action, bill_uri) %>%
head(n = 10)
}
get_bills_on_topic("climate")
get_bills_on_topic <- function(legislation_topic){
resource <- paste0(base_uri, endpoint)
query_params <- list(query = legislation_topic)
response <- GET(resource, query = query_params,
add_headers('X-API-Key' = propublica_key))
body <- content(response, "text")
info <- fromJSON(body)
df <- info$info[["results"]][["bills"]][[1]]
df2 <- select(df, bill_id, title, sponsor_title, sponsor_name, sponsor_state,
sponsor_party, active, latest_major_action_date,
latest_major_action, bill_uri) %>%
head(n = 10)
}
get_bills_on_topic("climate")
get_bills_on_topic("climate")
df2 <- select(df, bill_id, title, sponsor_title, sponsor_name, sponsor_state,
sponsor_party, active, latest_major_action_date,
latest_major_action, bill_uri)
is.data.frame(df2)
library("jsonlite")
library("httr")
library(dplyr)
response <- GET(base_uri)
body <- content(response, "text")
response <- GET(base_uri)
body <- content(response, "text")
base_uri <- "https://api.stlouisfed.org/fred/category/tags?category_id=125&api_key=abcdefghijklmnopqrstuvwxyz123456"
response <- GET(base_uri)
body <- content(response, "text")
body
base_uri <- "https://api.stlouisfed.org/fred/category/tags?category_id=125&api_key=918fef9d9b4f1b811212be56b04c15f3
"
response <- GET(base_uri)
base_uri <- "https://api.stlouisfed.org/fred/category/tags?category_id=125&api_key=918fef9d9b4f1b811212be56b04c15f3"
response <- GET(base_uri)
body <- content(response, "text")
body
info <- fromJSON(body)
info <- fromJSON(body)
body <- content(response, "text")
info <- fromJSON(body)
shiny::runApp('C:/Users/brand/Desktop/INFO-201/a8-data-app-brandonawds')
runApp('C:/Users/brand/Desktop/INFO-201/a8-data-app-brandonawds')
runApp('C:/Users/brand/Desktop/INFO-201/a8-data-app-brandonawds')
runApp('C:/Users/brand/Desktop/INFO-201/a8-data-app-brandonawds')
runApp('C:/Users/brand/Desktop/INFO-201/a8-data-app-brandonawds')
runApp('C:/Users/brand/Desktop/INFO-201/a8-data-app-brandonawds')
runApp('C:/Users/brand/Desktop/INFO-201/a8-data-app-brandonawds')
runApp('C:/Users/brand/Desktop/INFO-201/a8-data-app-brandonawds')
runApp('C:/Users/brand/Desktop/INFO-201/a8-data-app-brandonawds')
runApp('C:/Users/brand/Desktop/INFO-201/a8-data-app-brandonawds')
install.packages("rsconnect")
This plot shows the relationship between the mean
Forested land and the mean Agriculture land of each
country in "
rsconnect::setAccountInfo(name='brandonawds', token='E773F440A48AA590AE6AE533C1557C2D', secret='MYPh3uZtCr8ML0x+7LxpIt1vbndtdpcnihEo8bPb')
runApp('C:/Users/brand/Desktop/INFO-201/a8-data-app-brandonawds')
View(df)
setwd("C:/Users/brand/Desktop/INFO-201/Final")
library(dplyr)
library(tidyr)
#library(leaflet)
library(httr)
library(jsonlite)
df <- read.csv(
"./data/Food_Establishment_Inspection_Data.csv",
stringsAsFactors = FALSE
) %>% drop_na() %>%
mutate(
Inspection.Date = as.Date(Inspection.Date, format = "%m/%d/%Y")
) %>%
filter(Zip.Code == 98105, Inspection.Date > as.Date("2009-01-01")) %>%
mutate(
Grade = as.numeric(Grade)
)
df <- read.csv(
"./data/Food_Establishment_Inspection_Data.csv",
stringsAsFactors = FALSE
) %>% drop_na() %>%
mutate(
Inspection.Date = as.Date(Inspection.Date, format = "%m/%d/%Y")
) %>%
filter(Zip.Code == 98105, Inspection.Date > as.Date("2009-01-01")) %>%
mutate(
Grade = as.numeric(Grade)
)
View(df)
View(filter(df, Name == "SIZZLE & CRUNCH"))
View(filter(df, Inspection.Closed.Business == TRUE))
View(filter(df, Inspection.Closed.Business == "TRUE"))
violation_types <- unique(df$Violation.Description)
View(violation_types)
violation_types <- unique(df$Violation.Description) %>%
drop_na()
violation_types <- unique(df$Violation.Description) %>%
is.data.frame(violation_types)
violation_types <- unique(df$Violation.Description) %>%
is.data.frame(violation_types)
violation_types <- unique(df$Violation.Description)
is.data.frame(violation_types)
df['Violation.Description'].value_counts()
df.groupby('Violation.Description').count()
change_df <- df %>%
select(Violation.Description, Name) %>%
group_by(Violation.Description) %>%
count()
change_df
View(change_df)
change_df <- df %>%
select(Violation.Description, Name, Violation.Type) %>%
group_by(Violation.Description) %>%
count()
View(change_df)
change_df <- df %>%
select(Violation.Description, Name, Violation.Type) %>%
group_by(Violation.Description, Violation.Type, Name) %>%
count()
View(change_df)
change_df <- df %>%
select(Violation.Description, Name, Violation.Type) %>%
group_by(Violation.Type, Violation.Description) %>%
count()
View(change_df)
change_df <- df %>%
select(Violation.Description, Name, Violation.Type) %>%
group_by(Violation.Type, Name, Violation.Description) %>%
count()
View(change_df)
change_df <- df %>%
select(Violation.Description, Name, Violation.Type) %>%
filter(Violation.Type == "RED") %>%
group_by(Violation.Type, Violation.Description) %>%
count()
View(change_df)
idk <- df['Violation.Description'].value_counts()
idk <- dfViolation.Description.value_counts()
idk <- df.Violation.Description.value_counts()
num_red <- df %>%
select(Violation.Description, Name, Violation.Type) %>%
filter(Violation.Type == "RED") %>%
group_by(Violation.Type, Violation.Description) %>%
count()
View(num_red)
library(ggplot2)
red_pie <- ggplot(num_red, aes(x = "", y = n, fill = Violation.Description))+
geom_bar(width = 1, stat = "identity")
red_pie
num_red_filtered <- num_red %>%
rename("0100.v1" = "0100 - PIC certified by accredited program or compliance with code,
or correct answers",
"0100.v2" = "0100 - PIC certified by accredited program..."
)
num_red <- df %>%
select(Violation.Description, Name, Violation.Type) %>%
filter(Violation.Type == "RED") %>%
group_by(Violation.Type, Violation.Description) %>%
count() %>%
mutate(code = substr(Violation.Description, 1:4))
subtring(line, 1, 2)
line <- "hello"
subtring(line, 1, 2)
line <- "hello"
substring(line, 1, 2)
line <- "hello"
substring(line, 1, 3)
num_red <- df %>%
select(Violation.Description, Name, Violation.Type) %>%
filter(Violation.Type == "RED") %>%
group_by(Violation.Type, Violation.Description) %>%
count() %>%
mutate(code = substr(Violation.Description, 1, 4))
View(num_red)
red_codes <- num_red %>%
group_by(code) %>%
count()
View(red_codes)
red_codes <- num_red %>%
group_by(code)
View(red_codes)
red_codes <- num_red %>%
group_by(code) %>%
summarize(num = sum(code))
red_codes <- unique(num_red$code)
View(red_codes)
reds <- num_red %>%
filter(code == code_num)
reds <- num_red %>%
filter(code == "0100")
View(reds)
sum_code <- sum(reds$n)
sum_code
red_codes <- as.data.frame(unique(num_red$code))
View(red_codes)
red_codes <- as.data.frame(unique(num_red$code)) %>%
mutate(num_occurence = code_values(code))
code_values <- function(code_num) {
reds <- num_red %>%
filter(code == code_num)
sum_code <- sum(reds$n)
sum_code
}
red_codes <- as.data.frame(unique(num_red$code)) %>%
mutate(num_occurence = code_values(code))
View(num_red)
num_red <- df %>%
select(Violation.Description, Name, Violation.Type) %>%
filter(Violation.Type == "RED") %>%
group_by(Violation.Type, Violation.Description) %>%
count() %>%
mutate(code = substr(Violation.Description, 1, 4)) %>%
count()
View(num_red)
num_red <- df %>%
select(Violation.Description, Name, Violation.Type) %>%
filter(Violation.Type == "RED") %>%
group_by(Violation.Type, Violation.Description) %>%
count() %>%
mutate(code = substr(Violation.Description, 1, 4))
View(num_red)
num_red <- df %>%
select(Violation.Description, Name, Violation.Type) %>%
filter(Violation.Type == "RED") %>%
group_by(Violation.Type, Violation.Description) %>%
count() %>%
mutate(code = substr(Violation.Description, 1, 4)) %>%
spread(
key = code,
value = value
)
num_red <- df %>%
select(Violation.Description, Name, Violation.Type) %>%
filter(Violation.Type == "RED") %>%
group_by(Violation.Type, Violation.Description) %>%
count() %>%
mutate(code = substr(Violation.Description, 1, 4)) %>%
spread(
key = code,
value = n
)
View(num_red)
